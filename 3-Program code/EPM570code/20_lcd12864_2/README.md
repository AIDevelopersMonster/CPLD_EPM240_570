# 20_lcd12864_2 ‚Äî –ø—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã —Å –∫–∏—Ç–∞–π—Å–∫–∏–º —Ç–µ–∫—Å—Ç–æ–º –Ω–∞ LCD12864

–≠—Ç–æ—Ç –ø—Ä–∏–º–µ—Ä –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç **–≤—ã–≤–æ–¥ –∫–∏—Ç–∞–π—Å–∫–æ–≥–æ —Ç–µ–∫—Å—Ç–∞** –Ω–∞ —Å–∏–º–≤–æ–ª—å–Ω–æ–º –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–º –¥–∏—Å–ø–ª–µ–µ **LCD12864**
–≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ä–µ–∂–∏–º–µ (—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–º —Å HD44780) —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø–ª–∞—Ç—ã **EPM240 / EPM570 CPLD Development Board**.

–ú–æ–¥—É–ª—å `LCD12864.v` –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –Ω–∞–ø–∏—Å–∞–Ω –∫–∏—Ç–∞–π—Å–∫–∏–º –∞–≤—Ç–æ—Ä–æ–º –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–±–∞–π—Ç—ã —à—Ä–∏—Ñ—Ç–∞ –∏–∑ CGROM –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ
–∫–∏—Ç–∞–π—Å–∫–æ–≥–æ –º–æ–¥—É–ª—è LCD12864**. –≠—Ç–∏ –±–∞–π—Ç—ã –Ω–µ —è–≤–ª—è—é—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º ASCII –∏ –∑–∞–≤–∏—Å—è—Ç –æ—Ç –ø—Ä–æ—à–∏–≤–∫–∏ —à—Ä–∏—Ñ—Ç–∞ –≤ —Å–∞–º–æ–º –¥–∏—Å–ø–ª–µ–µ.

> ‚ö† –í–∞–∂–Ω–æ: –¥–∞–Ω–Ω—ã–π –ø—Ä–∏–º–µ—Ä —Ä–∞—Å—Å—á–∏—Ç–∞–Ω –Ω–∞ –∫–∏—Ç–∞–π—Å–∫–∏–π –º–æ–¥—É–ª—å LCD12864 —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ä–∞—Å–∫–ª–∞–¥–∫–æ–π CGROM.
> –ù–∞ –¥—Ä—É–≥–∏—Ö –¥–∏—Å–ø–ª–µ—è—Ö —Ç–µ –∂–µ –∫–æ–¥—ã –º–æ–≥—É—Ç –¥–∞–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ —Å–∏–º–≤–æ–ª—ã –∏–ª–∏ ¬´–∫–∞—à—É¬ª –Ω–∞ —ç–∫—Ä–∞–Ω–µ.

---

## üîß –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ

- –ü–ª–∞—Ç–∞: **EPM240 / EPM570 CPLD Development Board**
- –ñ–ö-–¥–∏—Å–ø–ª–µ–π **LCD12864** (–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä ST7920 –∏–ª–∏ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π, 8‚Äë–±–∏—Ç–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
- –¢–∞–∫—Ç–æ–≤–∞—è —á–∞—Å—Ç–æ—Ç–∞ –ø—Ä–æ–µ–∫—Ç–∞: **~50 –ú–ì—Ü**
- –õ–∏–Ω–∏–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∏—Å–ø–ª–µ–µ–º:
  - 8‚Äë–±–∏—Ç–Ω–∞—è —à–∏–Ω–∞ –¥–∞–Ω–Ω—ã—Ö: `dat[7:0]`
  - –°–∏–≥–Ω–∞–ª—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è: `rs`, `rw`, `en`

---

## üìÇ –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª

### `LCD12864.v` (–æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –∫–∏—Ç–∞–π—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä)

–ü–æ—Ä—Ç—ã –º–æ–¥—É–ª—è:

```verilog
module  LCD12864 (clk, rs, rw, en, dat);

    input       clk;   // —Å–∏—Å—Ç–µ–º–Ω—ã–π —Ç–∞–∫—Ç–æ–≤—ã–π —Å–∏–≥–Ω–∞–ª ~50 –ú–ì—Ü
    output [7:0] dat;  // 8-–±–∏—Ç–Ω–∞—è —à–∏–Ω–∞ –¥–∞–Ω–Ω—ã—Ö –∫ LCD
    output      rs;    // –≤—ã–±–æ—Ä —Ä–µ–≥–∏—Å—Ç—Ä–∞: 0 ‚Äî –∫–æ–º–∞–Ω–¥–∞, 1 ‚Äî –¥–∞–Ω–Ω—ã–µ
    output      rw;    // –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: 0 ‚Äî –∑–∞–ø–∏—Å—å –≤ LCD
    output      en;    // —Å—Ç—Ä–æ–± –∑–∞–ø–∏—Å–∏ (Enable)
```

–í–Ω—É—Ç—Ä–∏ –º–æ–¥—É–ª—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

- –î–µ–ª–∏—Ç–µ–ª—å —á–∞—Å—Ç–æ—Ç—ã –Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–µ `counter` –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –±–æ–ª–µ–µ –º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ —Ç–∞–∫—Ç–∞ `clkr`,
  –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –æ—Å–Ω–æ–≤–∞ –¥–ª—è —Å–∏–≥–Ω–∞–ª–∞ `en`.
- –ö–æ–Ω–µ—á–Ω—ã–π –∞–≤—Ç–æ–º–∞—Ç —Å–æ –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–π:
  - `set0`‚Ä¶`set3` ‚Äî –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∏—Å–ø–ª–µ—è:
    - `0x31` ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–µ–∂–∏–º–∞ (8-–±–∏—Ç–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, —Ä–µ–∂–∏–º –¥–∏—Å–ø–ª–µ—è —Å–æ–≥–ª–∞—Å–Ω–æ –∫–∏—Ç–∞–π—Å–∫–æ–º—É –ø—Ä–∏–º–µ—Ä—É),
    - `0x0C` ‚Äî –≤–∫–ª—é—á–µ–Ω–∏–µ –¥–∏—Å–ø–ª–µ—è –±–µ–∑ –∫—É—Ä—Å–æ—Ä–∞ –∏ –º–∏–≥–∞–Ω–∏—è,
    - `0x06` ‚Äî —Ä–µ–∂–∏–º –≤–≤–æ–¥–∞ (–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç –∞–¥—Ä–µ—Å–∞, –±–µ–∑ —Å–¥–≤–∏–≥–∞ —ç–∫—Ä–∞–Ω–∞),
    - `0x01` ‚Äî –æ—á–∏—Å—Ç–∫–∞ –¥–∏—Å–ø–ª–µ—è.
  - `dat0`‚Ä¶`dat40` ‚Äî –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ **–±–∞–π—Ç–æ–≤ –∫–∏—Ç–∞–π—Å–∫–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤** –≤ DDRAM LCD.
    –ó–¥–µ—Å—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏—è –≤–∏–¥–∞ `8'hce`, `8'hd2`, `8'hc3`, `8'hc7`, `8'hb5`, `8'hc4`, `8'hbf`, `8'haa` –∏ —Ç.–ø.
  - `set4`, `set5` ‚Äî –∫–æ–º–∞–Ω–¥—ã —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∞–¥—Ä–µ—Å–∞ –¥–ª—è –¥—Ä—É–≥–∏—Ö —Å—Ç—Ä–æ–∫ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `0x90`, `0x88` –∏ —Ç.–¥.).
  - `nul` ‚Äî —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –≤ –∫–æ—Ç–æ—Ä–æ–º –º–æ–¥—É–ª—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç —Ü–∏–∫–ª –∏ –∑–∞—Ç–µ–º –æ—Å—Ç–∞—ë—Ç—Å—è
    –≤ —Å—Ç–∞–±–∏–ª—å–Ω–æ–º —Ä–µ–∂–∏–º–µ, –Ω–µ –∏–∑–º–µ–Ω—è—è —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–∏—Å–ø–ª–µ—è.

–ë–∞–π—Ç—ã `0xCE`, `0xD2`, `0xC3`, `0xC7`, `0xB5`, `0xC4`, `0xBF`, `0xAA`, `0xB7`, `0xA2`, `0xCD`, `0xF8` –∏ —Ç.–ø.
‚Äî —ç—Ç–æ **–∫–æ–¥—ã –∏–µ—Ä–æ–≥–ª–∏—Ñ–æ–≤ –∏–∑ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ –ü–ó–£ —à—Ä–∏—Ñ—Ç–∞ (CGROM)** –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–∏—Ç–∞–π—Å–∫–æ–≥–æ LCD12864.
–ù–∞ –∫–∏—Ç–∞–π—Å–∫–æ–º –¥–∏—Å–ø–ª–µ–µ –æ–Ω–∏ —Ñ–æ—Ä–º–∏—Ä—É—é—Ç –æ—Å–º—ã—Å–ª–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç (—Ñ—Ä–∞–∑—ã –Ω–∞ –∫–∏—Ç–∞–π—Å–∫–æ–º + –ª–∞—Ç–∏–Ω—Å–∫–æ–µ ¬´FPGA¬ª),
–Ω–æ –Ω–∞ –¥–∏—Å–ø–ª–µ–µ —Å –¥—Ä—É–≥–æ–π –≤–µ—Ä—Å–∏–µ–π CGROM –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è.

---

## üí¨ –ß–µ–º —ç—Ç–æ—Ç –ø—Ä–∏–º–µ—Ä –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç ASCII‚Äë–≤–∞—Ä–∏–∞–Ω—Ç–æ–≤

- –ó–¥–µ—Å—å **–Ω–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö ASCII-—Å—Ç—Ä–æ–∫** –≤—Ä–æ–¥–µ `"FPGA"`, `"START"`, `"HELLO"` –≤ —á–∏—Å—Ç–æ–º –≤–∏–¥–µ,
  –∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–º–µ—Å—å –∏–∑:
  - –∫–∏—Ç–∞–π—Å–∫–∏—Ö –∫–æ–¥–æ–≤ (0xCE, 0xD2, 0xBF, 0xAA, ‚Ä¶),
  - –ª–∞—Ç–∏–Ω—Å–∫–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤ (`"F"`, `"P"`, `"G"`, `"A"`, `"!"` –∏ –¥—Ä.).
- –ü–æ—ç—Ç–æ–º—É:
  - –Ω–∞ ¬´—Ä–æ–¥–Ω–æ–º¬ª –∫–∏—Ç–∞–π—Å–∫–æ–º –º–æ–¥—É–ª–µ —Ç–µ–∫—Å—Ç –≤—ã–≥–ª—è–¥–∏—Ç –∫—Ä–∞—Å–∏–≤–æ –∏ —á–∏—Ç–∞–µ–º–æ –ø–æ-–∫–∏—Ç–∞–π—Å–∫–∏,
  - –Ω–∞ –¥—Ä—É–≥–æ–º –º–æ–¥—É–ª–µ —Ç–µ –∂–µ –±–∞–π—Ç—ã –º–æ–≥—É—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ –¥—Ä—É–≥–∏–º —Å–∏–º–≤–æ–ª–∞–º.

–ï—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –≤—ã–≤–æ–¥–∏—Ç—å **—Ä—É—Å—Å–∫–∏–π —Ç–µ–∫—Å—Ç –∏–ª–∏ —á–∏—Å—Ç—ã–π ASCII**, —Ç–æ:

- –¥–∞–Ω–Ω—ã–π –º–æ–¥—É–ª—å –ª—É—á—à–µ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∫–∞–∫ **—ç—Ç–∞–ª–æ–Ω –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ —Ç–∞–π–º–∏–Ω–≥–æ–≤**,
- –∞ **–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –±–∞–π—Ç–æ–≤** –≤ —Å–æ—Å—Ç–æ—è–Ω–∏—è—Ö `dat0`‚Ä¶`dat40` –Ω—É–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ —Å–≤–æ–∏
  ASCII‚Äë–∫–æ–¥—ã –∏–ª–∏ –∫–æ–¥—ã —Ä—É—Å—Å–∫–∏—Ö –±—É–∫–≤ –¥–ª—è –≤–∞—à–µ–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π CGROM (–µ—Å–ª–∏ –æ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–∏—Ä–∏–ª–ª–∏—Ü—É).

---

## ‚ñ∂Ô∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –ø—Ä–æ–µ–∫—Ç–µ

1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –º–æ–¥—É–ª—å `LCD12864` –≤ –≤–µ—Ä—Ö–Ω–µ–º —É—Ä–æ–≤–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä:

```verilog
LCD12864 u_lcd (
    .clk (clk_50m),
    .rs  (LCD_RS),
    .rw  (LCD_RW),
    .en  (LCD_EN),
    .dat (LCD_DAT)
);
```

2. –í —Ñ–∞–π–ª–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π (`*.qsf`) –ø—Ä–∏–≤—è–∂–∏—Ç–µ —Å–∏–≥–Ω–∞–ª—ã `LCD_RS`, `LCD_RW`, `LCD_EN`, `LCD_DAT[7:0]`
   –∫ –≤—ã–≤–æ–¥–∞–º —Ä–∞–∑—ä—ë–º–∞, –∫ –∫–æ—Ç–æ—Ä–æ–º—É –ø–æ–¥–∫–ª—é—á—ë–Ω –≤–∞—à –º–æ–¥—É–ª—å LCD12864.
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–∏—Ç–∞–Ω–∏–µ, –∫–æ–Ω—Ç—Ä–∞—Å—Ç (VO) –∏ –ø–æ–¥—Å–≤–µ—Ç–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã —Å–æ–≥–ª–∞—Å–Ω–æ –¥–∞—Ç–∞—à–∏—Ç—É LCD12864.
4. –ü–æ—Å–ª–µ –ø—Ä–æ—à–∏–≤–∫–∏ CPLD/FPGA –¥–∏—Å–ø–ª–µ–π –¥–æ–ª–∂–µ–Ω –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å **–∫–∏—Ç–∞–π—Å–∫–∏–π —Ç–µ–∫—Å—Ç**, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π CGROM
   –∏–º–µ–Ω–Ω–æ –≤–∞—à–µ–≥–æ –º–æ–¥—É–ª—è.

---

## ‚ö† –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- –ü—Ä–æ–µ–∫—Ç **–∂—ë—Å—Ç–∫–æ –ø—Ä–∏–≤—è–∑–∞–Ω** –∫ –∫–∏—Ç–∞–π—Å–∫–æ–º—É —à—Ä–∏—Ñ—Ç—É –¥–∏—Å–ø–ª–µ—è.
- –ù–∞ –º–æ–¥—É–ª—è—Ö —Å –¥—Ä—É–≥–æ–π –≤–µ—Ä—Å–∏–µ–π CGROM (–µ–≤—Ä–æ–ø–µ–π—Å–∫–æ–π, —Ä—É—Å—Å–∫–æ–π, —è–ø–æ–Ω—Å–∫–æ–π –∏ —Ç.–¥.) —Ä–µ–∑—É–ª—å—Ç–∞—Ç –º–æ–∂–µ—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è.
- –î–ª—è —Ä—É—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω—É–∂–µ–Ω –ª–∏–±–æ:

  - –º–æ–¥—É–ª—å LCD12864 —Å —Ä—É—Å—Å–∫–æ–π/–µ–≤—Ä–æ–ø–µ–π—Å–∫–æ–π CGROM –∏ —Ç–∞–±–ª–∏—Ü–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è ¬´–±–∞–π—Ç ‚Üí —Å–∏–º–≤–æ–ª¬ª,
  - –ª–∏–±–æ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤ (CGRAM) –∏–ª–∏ –¥—Ä—É–≥–æ–π —Ç–∏–ø –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞.

---

## üìé –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø—Ä–æ–µ–∫—Ç–∞:  
  https://github.com/AIDevelopersMonster/CPLD_EPM240_570

- –ü–ª–µ–π–ª–∏—Å—Ç FPGA / CPLD (YouTube):  
  https://www.youtube.com/playlist?list=PLVoFIRfTAAI7-d_Yk6bNVnj4atUdMxvT5

---

## ¬© kontakts.ru

–≠—Ç–æ—Ç –ø—Ä–∏–º–µ—Ä —Å–æ—Ö—Ä–∞–Ω—ë–Ω –∫–∞–∫ **–¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –∫–∏—Ç–∞–π—Å–∫–æ–≥–æ –∫–æ–¥–∞ —Ä–∞–±–æ—Ç—ã —Å LCD12864 –∏ –∫–∏—Ç–∞–π—Å–∫–∏–º —Ç–µ–∫—Å—Ç–æ–º**.
