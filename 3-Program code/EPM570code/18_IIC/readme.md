# I2C EEPROM AT24C08 ‚Äî –ø—Ä–∏–º–µ—Ä –¥–ª—è CPLD EPM240 / EPM570

–î–∞–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É —Å **EEPROM AT24C08** –ø–æ —à–∏–Ω–µ **I¬≤C**,  
—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π "–≤—Ä—É—á–Ω—É—é" (bit-banging) –≤ **CPLD EPM240 / EPM570**.

–ú–æ–¥—É–ª—å `i2c.v` –ø–æ–∑–≤–æ–ª—è–µ—Ç:

- –∑–∞–ø–∏—Å–∞—Ç—å 4-–±–∏—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Å –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–µ–π –≤ –ø–∞–º—è—Ç—å EEPROM;
- –∑–∞—Ç–µ–º –ø—Ä–æ—á–∏—Ç–∞—Ç—å –µ–≥–æ –∏ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –Ω–∞ —Å–≤–µ—Ç–æ–¥–∏–æ–¥–∞—Ö.

---

## ‚öôÔ∏è –§—É–Ω–∫—Ü–∏–∏ –¥–µ–º–æ

- –ù–∞ –≤—Ö–æ–¥ `data_in[3:0]` –ø–æ–¥–∞—ë—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ —Å DIP-–ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–µ–π / –ø–æ–ª–∑—É–Ω–∫–æ–≤.
- –ö–Ω–æ–ø–∫–∞ **K1** (`wr_input`, –∞–∫—Ç–∏–≤–Ω—ã–π –Ω–æ–ª—å) ‚Äî **–∑–∞–ø–∏—Å—å** –±–∞–π—Ç–∞ –≤ EEPROM:
  - —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è I2C START;
  - –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∞–¥—Ä–µ—Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ + —Ä–µ–∂–∏–º –∑–∞–ø–∏—Å–∏;
  - –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –∞–¥—Ä–µ—Å –±–∞–π—Ç–∞ –≤ EEPROM (`addr`);
  - –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –±–∞–π—Ç –¥–∞–Ω–Ω—ã—Ö (`writeData_reg`);
  - —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è STOP.
- –ö–Ω–æ–ø–∫–∞ **K2** (`rd_input`, –∞–∫—Ç–∏–≤–Ω—ã–π –Ω–æ–ª—å) ‚Äî **—á—Ç–µ–Ω–∏–µ** –±–∞–π—Ç–∞ –∏–∑ EEPROM:
  - —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è I2C START;
  - –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∞–¥—Ä–µ—Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ + —Ä–µ–∂–∏–º –∑–∞–ø–∏—Å–∏ (–¥–ª—è —É–∫–∞–∑–∞–Ω–∏—è –∞–¥—Ä–µ—Å–∞ —è—á–µ–π–∫–∏);
  - –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∞–¥—Ä–µ—Å –±–∞–π—Ç–∞ (`addr`);
  - —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –ø–æ–≤—Ç–æ—Ä–Ω—ã–π START;
  - –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∞–¥—Ä–µ—Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ + —Ä–µ–∂–∏–º —á—Ç–µ–Ω–∏—è;
  - –ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è 1 –±–∞–π—Ç (`readData_reg`);
  - —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è STOP.
- –ú–ª–∞–¥—à–∏–µ 4 –±–∏—Ç–∞ `readData_reg` –≤—ã–≤–æ–¥—è—Ç—Å—è –Ω–∞ `leddata[3:0]` ‚Äî –∏–Ω–¥–∏–∫–∞—Ü–∏—è –Ω–∞ –ø–ª–∞—Ç–µ.

---

## üîß –ü–æ—Ä—Ç—ã –º–æ–¥—É–ª—è `i2c.v`

```verilog
input        clk;        // —Å–∏—Å—Ç–µ–º–Ω–∞—è —á–∞—Å—Ç–æ—Ç–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä 50 –ú–ì—Ü
input        rst;        // –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Å–±—Ä–æ—Å, –∞–∫—Ç–∏–≤–Ω—ã–π 0
input  [3:0] data_in;    // –¥–∞–Ω–Ω—ã–µ —Å –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–µ–π –¥–ª—è –∑–∞–ø–∏—Å–∏ –≤ EEPROM
input        wr_input;   // –∫–æ–º–∞–Ω–¥–∞ –∑–∞–ø–∏—Å–∏ (–∫–Ω–æ–ø–∫–∞ K1, –∞–∫—Ç–∏–≤–Ω—ã–π 0)
input        rd_input;   // –∫–æ–º–∞–Ω–¥–∞ —á—Ç–µ–Ω–∏—è (–∫–Ω–æ–ø–∫–∞ K2, –∞–∫—Ç–∏–≤–Ω—ã–π 0)
output       scl;        // –ª–∏–Ω–∏—è —Ç–∞–∫—Ç–æ–≤ I2C
inout        sda;        // –ª–∏–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö I2C
output [3:0] leddata;    // –∏–Ω–¥–∏–∫–∞—Ü–∏—è –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–º–ª–∞–¥—à–∏–µ 4 –±–∏—Ç–∞)
